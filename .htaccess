RewriteEngine on 
Options +FollowSymlinks
RewriteBase /mediasite/

RewriteRule ^admin$ admin.php
RewriteRule ^admin/$ admin [R]
RewriteRule ^admin/flags$ admin.php?mode=flags
RewriteRule ^admin/flags/(.*)/(.*)$ admin.php?mode=flags&id=$1&action=$2

RewriteRule ^login$ login.php
RewriteRule ^register$ login.php?action=register
RewriteRule ^logout$ login.php?action=logout

RewriteRule ^tools/encrypt$ encrypt.php

RewriteRule ^creations/(.*)/(.*)$ creations.php?mode=$1&page=$2
RewriteRule ^creations/(.*)/a/(.*)$ creations.php?mode=action&action=$1&id=$2
RewriteRule ^creations$ creations/newest/1  [R]
RewriteRule ^creations/$ creations/newest/1 [R]
RewriteRule ^creations/$ creations/newest/1 [R]
RewriteRule ^creations/(.*)$ creations/$1/1 [R]

RewriteRule ^creation/(.*)$ creation.php?id=$1

RewriteRule ^versions.php?id=(.*)$ edit.php?id=$1&mode=version
RewriteRule ^creation/a/(.*)/(.*)$ $2.php?id=$1
RewriteRule ^creation/(.*)/version/(.*)/(.*)$ edit.php?id=$1&mode=version&action=$3&aid=$2

RewriteRule ^(.*)/(.*)/flag$ flag.php?type=$1&id=$2
RewriteRule ^creation/(.*)/a/(.*)$ flag.php?action=$3&type=creation&id=$2
RewriteRule ^comment/(.*)/a/(.*)$ flag.php?action=$3&type=comment&id=$2

RewriteRule ^messages$ messages.php
RewriteRule ^messages/(.*)$ messages.php?uid=$1
RewriteRule ^message/(.*)/delete$ messages.php?action=delete&id=$1

RewriteRule ^user/(.*)$ user.php?id=$1

RewriteRule ^user/(.*)/preferences$ pref.php?id=$1



RewriteRule ^user/(.*)/ddd$ index.php

RewriteRule ^upload$ upload.php

RewriteRule ^about/$ info/index.php
RewriteRule ^about/(.*)$ info/$1.php

RewriteRule ^include/style.css$ templates/style.php

ErrorDocument 404 /mediasite/errors/404.php
ErrorDocument 403 /mediasite/errors/403.php

php_value upload_max_filesize 25M
php_value post_max_size 25M